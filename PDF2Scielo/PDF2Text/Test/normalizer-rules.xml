<?xml version="1.0"?>
<style name="test" ncolumns="3" xmlns="http://www.scielo.org.mx" >
  <global>
    <rule name="RemoveHeaders0" expectedMatches="unbounded">
      <regexp>[\n]+[\u000c]+[0-9]+[ ]*[ \w\p{S}\p{P}]+[\n]+</regexp>
      <sust>\n</sust>
    </rule>
    <rule name="GetFront">
      <regexp>^(.|\s)* \[/key\]\n</regexp>
      <sust>#{Front}</sust>
    </rule>
    <rule name="GetBody">
      <regexp>\[/key\](?&lt;Result&gt;(?:.|\s)*)\[ref\]</regexp>
      <sust>#{Body}</sust>
    </rule>
    <rule name="GetBack">
      <regexp>\[ref\](.|\s)*</regexp>
      <sust>#{Back}</sust>
    </rule>
  </global>
  <front>
    <rule name="MarkTitle">
      <regexp>^Atm.*[\n ]+(?&lt;Result&gt;[^|]+?)\n[\n]+</regexp>
      <sust>#{Result}</sust>
      <modifiers>
        <modifier name="Concat">
          <param name="prefix" value="[title] "/>
          <param name="postfix" value=" [/title]\n"/>
        </modifier>
      </modifiers>
    </rule>
  </front>
  <body>
    <rule name="MarkSections" expectedMatches="unbounded">
      <regexp>[\n]+[0-9]+[.][ ].*\n</regexp>
      <sust>#{Result}</sust>
      <modifiers>
        <modifier name="Trim"/>
        <modifier name="Concat">
          <param name="prefix" value="\n[sec] "/>
          <param name="postfix" value=" [/sec]\n"/>
        </modifier>
      </modifiers>
    </rule>
  </body>
  <back>
    <rule name="MarkStartCitations" expectedMatches="unbounded">
      <regexp>[\n]+(?&lt;Result&gt;[A-Z].*)</regexp>
      <sust>#{Result}</sust>
      <modifiers>
        <modifier name="Concat">
          <param name="prefix" value="\n[cit] "/>
        </modifier>
      </modifiers>
    </rule>
  </back>
</style>
